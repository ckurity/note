
## smbclient
```
[-N|--no-pass]
[-L|--list=HOST]
[-U|--user=[DOMAIN/]USERNAME[%PASSWORD]]
[--password=STRING]
[--pw-nt-hash]
```

```
smbclient -NL $ip
smbclient -N //$ip/xx

smbclient -L $ip -U svc-alfresco%s3rvice

cme smb $ip
cme smb $ip --shares -u svc-alfresco -p s3rvice

cme winrm $ip
cme winrm $ip -u svc-alfresco -p s3rvice

smbclient //$ip/SYSVOL -U svc-alfresco%s3rvice -c 'ls'

sudo mount -t cifs //$ip/SYSVOL /mnt -o username=svc-alfresco,password=s3rvice
find /mnt -type f
```

## [Recursively download a directory using smbclient](https://superuser.com/questions/856617/how-do-i-recursively-download-a-directory-using-smbclient)
```
smbclient -N //$ip/Replication
recurse
prompt
mget *
```

## Smbclient Download all files in one-liner
```
smbclient //$ip/Data -c 'recurse;prompt;mget *'
smbclient //$ip/profiles$ -c 'rec;pro;mget *'
```

## List files in one-liner without Password
```
smbclient -N //$ip/Replication
smbclient -N //$ip/Replication -c ls
smbclient -N //$ip/Replication -c 'rec;ls'
smbclient -N //$ip/Replication -c 'recurse;ls'
```

## List files in one-liner with Password
```
# Arrangement for IP doesn't matter

smbclient -Usupport%'#00^BlackKnight' -c ls //$ip/profiles$
smbclient //$ip/profiles$ -Usupport%'#00^BlackKnight' -c ls
```

```
$ smbclient -Usupport%'#00^BlackKnight' -c ls //$ip/profiles$
  .                                   D        0  Thu Jun  4 00:47:12 2020
  ..                                  D        0  Thu Jun  4 00:47:12 2020
  AAlleni                             D        0  Thu Jun  4 00:47:11 2020
  ABarteski                           D        0  Thu Jun  4 00:47:11 2020
  ABekesz                             D        0  Thu Jun  4 00:47:11 2020
```
## Flags
```
$ smbclient --help | eg \\'-N|-L'
  -N, --no-pass                                Don't ask for a password

  -L, --list=HOST                              Get a list of shares available
```


## Examples: List files; Download all with mget *
```
$ smbclient -N //$ip/Replication
Anonymous login successful
Try "help" to get a list of possible commands.
smb: \> recurse 
smb: \> prompt 
smb: \> mget *
getting file \active.htb\Policies\{31B2F340-016D-11D2-945F-00C04FB984F9}\GPT.INI of size 23 as active.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/GPT.INI (0.3 KiloBytes/sec) (average 0.3 KiloBytes/sec)
... snip ...
getting file \active.htb\Policies\{31B2F340-016D-11D2-945F-00C04FB984F9}\MACHINE\Preferences\Groups\Groups.xml of size 533 as active.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/MACHINE/Preferences/Groups/Groups.xml (7.7 KiloBytes/sec) (average 8.0 KiloBytes/sec)
... snip ...
getting file \active.htb\Policies\{6AC1786C-016F-11D2-945F-00C04fB984F9}\MACHINE\Microsoft\Windows NT\SecEdit\GptTmpl.inf of size 3722 as active.htb/Policies/{6AC1786C-016F-11D2-945F-00C04fB984F9}/MACHINE/Microsoft/Windows NT/SecEdit/GptTmpl.inf (22.4 KiloBytes/sec) (average 12.4 KiloBytes/sec)
smb: \> 
```

## Examples: List files in one-liner
```
$ smbclient -N //$ip/Replication
Anonymous login successful
Try "help" to get a list of possible commands.
smb: \> ex

$ smbclient -N //$ip/Replication -c ls
Anonymous login successful
  .                                   D        0  Sat Jul 21 18:37:44 2018
  ..                                  D        0  Sat Jul 21 18:37:44 2018
  active.htb                          D        0  Sat Jul 21 18:37:44 2018

                5217023 blocks of size 4096. 309833 blocks available
```
