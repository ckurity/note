- [Unauthenticated ldapsearch](#ldapsearch--xh-ldapip--s-base-namingcontexts)
- [Authenticated ldapsearch](#ldapsearch--h-ldapip--b-dcsearchdchtb--d-hopesharpsearchhtb--w-isolationiskey)

### TLDR
```
ldapsearch -xH ldap://$ip -b 'DC=cascade,DC=local' | tee ldap-anonymous.txt
ldapsearch -xH ldap://$ip -b 'DC=cascade,DC=local' '(objectClass=person)' | tee ldap-person.txt

ldapsearch -xH ldap://$ip -b 'DC=BLACKFIELD,DC=local' -D 'support@BLACKFIELD.local' -w '#00^BlackKnight'

ldapsearch -H ldap://$ip -b 'DC=BLACKFIELD,DC=local' -D 'support@blackfield.local' -w '#00^BlackKnight' | tee ldapsearch-support.txt
```
### 
```
-x         Simple authentication
-H URI     LDAP Uniform Resource Identifier(s)
-s scope   one of base, one, sub or children (search scope)

-b basedn  base dn for search

-D binddn  bind DN
-w passwd  bind password (for simple authentication)
-W         prompt for bind password
```
## Useful Info
```
cat ldap-anonymous.txt | g objectClass | sort -u
cat ldap-anonymous.txt | sort | gi pwd | egv 'badPwdCount|pwdLastSet|minPwdAge|maxPwdAge|minPwdLength|pwdHistoryLength|pwdProperties'
cat ldap-anonymous.txt | egi 'pwd|pass' | sort | egv 'badPwdCount|pwdLastSet|minPwdAge|maxPwdAge|minPwdLength|pwdHistoryLength|pwdProperties|badPasswordTime'
```

### ldapsearch -xH ldap://$ip -s base namingcontexts
```
$ ldapsearch -xH ldap://$ip -s base namingcontexts
# extended LDIF
#
# LDAPv3
# base <> (default) with scope baseObject
# filter: (objectclass=*)
# requesting: namingcontexts 
#

#
dn:
namingcontexts: DC=EGOTISTICAL-BANK,DC=LOCAL
namingcontexts: CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOCAL
namingcontexts: CN=Schema,CN=Configuration,DC=EGOTISTICAL-BANK,DC=LOCAL
namingcontexts: DC=DomainDnsZones,DC=EGOTISTICAL-BANK,DC=LOCAL
namingcontexts: DC=ForestDnsZones,DC=EGOTISTICAL-BANK,DC=LOCAL

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1
```

### ldapsearch -H ldap://$ip -b 'DC=search,DC=htb' -D hope.sharp@search.htb -w IsolationIsKey?
Domain must be in `user@domain` format
```
ldapsearch -H ldap://$ip -b 'DC=search,DC=htb' -D hope.sharp@search.htb -w IsolationIsKey? | tee ldapsearch_out.txt
```

### Common Mistake
Domain must be in `user@domain` format
```
-D 'search.htb\hope.sharp'
```

[[SOLVED]Having trouble with LDAP -can you help?](https://forum.zentyal.org/index.php?topic=15240.0)

### 
```

```
### 
```

```
### 
```

```
### 
```

```
### 
```

```
### 
```

```
### 
```

```
